(()=>{var t={n:r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return t.d(e,{a:e}),e},d:(r,e)=>{for(var a in e)t.o(e,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:e[a]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};(()=>{"use strict";t.r(r);const e=flarum.core.compat.extend,a=flarum.core.compat.app;var o=t.n(a);const n=flarum.core.compat["common/components/EditUserModal"];var s=t.n(n);const i=flarum.core.compat.Model;var u=t.n(i);const l=flarum.core.compat["common/models/User"];var f=t.n(l);const c=flarum.core.compat["common/utils/extractText"];var d=t.n(c);const p=flarum.core.compat["common/utils/Stream"];var g=t.n(p);const b=flarum.core.compat["forum/components/UserCard"];var v=t.n(b);const y=flarum.core.compat["forum/components/PostUser"];var h=t.n(y);function S(t,r){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},S(t,r)}flarum.core.compat["forum/app"];const L=flarum.core.compat["common/Component"];var B=t.n(L);function T(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,a=Array(r);e<r;e++)a[e]=t[e];return a}flarum.core.compat["common/components/LoadingIndicator"],flarum.core.compat["common/utils/classList"];var _=function(t){function r(){return t.apply(this,arguments)||this}var e,a;a=t,(e=r).prototype=Object.create(a.prototype),e.prototype.constructor=e,S(e,a);var o=r.prototype;return o.oninit=function(r){t.prototype.oninit.call(this,r)},o.view=function(){var t="",r=this.attrs.user.tagList().split(",");if(r.length>0)for(var e,a=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return T(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?T(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r);!(e=a()).done;)t+='<span class="userTag">'+e.value+"</span>";return m("div",{className:"userTags"},m.trust(t))},r}(B());o().initializers.add("serakoi/flarumstaffbadge",(function(){f().prototype.staffBadge=u().attribute("staffBadge"),f().prototype.tagList=u().attribute("tagList"),(0,e.extend)(h().prototype,"oncreate",(function(t,r){var e,a,n,s=this.attrs.post.user();if(s){var i=s.data.attributes.staffBadge;if(i&&"true"===i.toLowerCase()){var u=null==(e=o().forum.attribute("staffBadgeTitle"))?void 0:e.toString(),l=null==(a=o().forum.attribute("staffBadgeColor"))?void 0:a.toString(),f=null==(n=o().forum.attribute("staffBadgeBg"))?void 0:n.toString();u||(u="STAFF"),""==u&&(u="STAFF"),f||(f="rgb(70, 209, 96)"),""==f&&(f="rgb(70, 209, 96)"),l||(l="#fff"),""==l&&(l="#fff");var c=r.dom;if(!c)return console.log("No anchor found");var d=document.createElement("div");d.className="badgeHolder",d.innerHTML='<div style="background-color:'+f+";color:"+l+'" class="ext_staffbadge_sm">\n            '+u+"\n        </div>",c.appendChild(d)}}})),(0,e.extend)(v().prototype,"oncreate",(function(t,r){var e=this.attrs.user.data.attributes;if(e.staffBadge&&"true"===e.staffBadge.toLowerCase()){var a,n,s,i=null==(a=o().forum.attribute("staffBadgeTitle"))?void 0:a.toString(),u=null==(n=o().forum.attribute("staffBadgeColor"))?void 0:n.toString(),l=null==(s=o().forum.attribute("staffBadgeBg"))?void 0:s.toString();i||(i="STAFF"),""==i&&(i="STAFF"),l||(l="rgb(70, 209, 96)"),""==l&&(l="rgb(70, 209, 96)"),u||(u="#fff"),""==u&&(u="#fff");var f=r.dom.querySelector(".UserCard-avatar"),c=document.createElement("div");c.classList.add("ext_staffbadge"),c.style.color=u,c.style.backgroundColor=l,c.innerText=i,f.append(c)}})),(0,e.extend)(v().prototype,"infoItems",(function(t){var r=this.attrs.user;r.attribute("tagList")&&0!==r.attribute("tagList").split(",").length&&t.add("tagList",m(_,{user:r}))})),(0,e.extend)(s().prototype,"oninit",(function(){var t,r;this.status=g()((null==(t=this.attrs.user)?void 0:t.staffBadge())||""),this.tagList=g()((null==(r=this.attrs.user)?void 0:r.tagList())||"")})),(0,e.extend)(s().prototype,"fields",(function(t){o().session.user.attribute("canEditStaffBadge")&&t.add("hasbadge",m("div",{className:"Form-group"},m("label",null,o().translator.trans("serakoi-flarumstaffbadge.forum.edit_user.heading")),m("input",{className:"FormControl",placeholder:d()(o().translator.trans("serakoi-flarumstaffbadge.forum.edit_user.placeholder")),bidi:this.status})),100),o().session.user.attribute("canEditTagList")&&t.add("tagList",m("div",{className:"Form-group"},m("label",null,o().translator.trans("serakoi-flarumstaffbadge.forum.edit_user.tagList.heading")),m("input",{className:"FormControl",placeholder:d()(o().translator.trans("serakoi-flarumstaffbadge.forum.edit_user.tagList.placeholder")),bidi:this.tagList})),100)})),(0,e.extend)(s().prototype,"data",(function(t){t.staffBadge=this.status(),t.tagList=this.tagList()}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map